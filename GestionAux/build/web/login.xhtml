<?xml version="1.0" encoding="UTF-8"?>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">
    <ui:composition>
	<f:view>
		<p:growl id="mensajes" showDetail="true" life="5000" />
		<center>
			<h:form >
				<p:panel header="Login" rendered="#{!loginController.autenticado}"
					style="width:360px; position: absolute; top: 50%; left: 50%; margin-top:-100px; margin-left:-180px">
					<p:panelGrid columns="2">
						<h:outputLabel for="idLogin" value="Usuario: *"
							style="font-size:14px;width:75px; height:10px;" />
						<p:inputText value="#{loginController.id}" id="idLogin"
                                                        required="true" label="idLogin"
							style="font-size:14px; width:200px; height:10px;" />

						<h:outputLabel for="password" value="Contraseña: *"
							style="font-size:14px;width:200px; height:10px;" />
						<p:password value="#{loginController.password}" id="password"
							required="true" label="password"
							style="font-size:14px;width:200px;height:10px;" />

						<!-- <h:outputText value="Rol: "
							style="font-size:14px; width:75px; height:10px;" />
						<p:selectOneMenu value="#{loginBean.rolSeleccionado}"
							effect="fold" style="font-size:14px;width:210px">
							<f:selectItem itemLabel="Director de Programa" itemValue="administradorShield" />
							<f:selectItem itemLabel="Administrador Conjunto"
								itemValue="administradorConjunto" />
							<f:selectItem itemLabel="Dueño" itemValue="dueno" />
							<f:selectItem itemLabel="Habitante" itemValue="habitante" />
							<f:selectItem itemLabel="Vigilante" itemValue="vigilante" />
						</p:selectOneMenu>
                                                -->
						<f:facet name="footer">
							<center>
								<p:commandButton id="loginButton" value="Iniciar Sesión"
									style="font-size:14px; width:200px; height:30px;"
									action="#{loginController.login}" ajax="false" />
							</center>
						</f:facet>

					</p:panelGrid>
					<p:watermark for="idLogin" value="Ejemplo: 1122334" />
					<p:commandLink value="¿Olvidaste la contraseña?" style="font-size:14px;" oncomplete="buscarPersona.show()" />
				</p:panel>
			</h:form>
			
			<p:dialog id="dialogBuscarPersona" header="Recuperacion de Contraseña"
					widgetVar="buscarPersona" resizable="false" width="400px"
					showEffect="clip" hideEffect="fold" modal="true">
					<h:form id="formBuscarPersona">
						<center>
						<p:panelGrid columns="2">
						<h:outputText value="Cedula:  " />
						<p:inputText value="#{loginBean.cedulaRecuperarContrasena}" />
						</p:panelGrid>
						<p:commandButton value="Enviar Datos" action="#{loginBean.buscarPersona}" oncomplete="recuperarContrasena.show()" update=":dialogRecuperarContrasena"/>
						</center>
					</h:form>
				</p:dialog>
				<p:growl showDetail="true" life="5000" />
				<p:dialog id="dialogRecuperarContrasena" header="Recuperacion de Contraseña"
					widgetVar="recuperarContrasena" resizable="false" width="400px"
					showEffect="clip" hideEffect="fold" modal="true">
					<h:form id="formRecuperarContrasena">
						<center>
						<p:panelGrid columns="2" id="panelRecuperarContrasena" rendered="#{loginBean.personaEncontrada}">
							<p:outputLabel value="Pregunta: " />
							<p:inputText value="#{loginBean.persona.pregunta}" />

							<p:outputLabel value="Respuesta:  " />
							<p:inputText value="#{loginBean.respuestaUsuario}" />
							
							<p:outputLabel value="Contraseña: "/>
							<p:password value="#{loginBean.contrasena}" id="contrasena" required="true" label="password" style="font-size:14px;width:200px;height:10px;"  />
								
							<p:outputLabel value="Repetir Contraseña: "/>
							<p:password value="#{loginBean.repetirContrasena}" id="repetirContrasena" required="true" label="password" style="font-size:14px;width:200px;height:10px;"  />
						</p:panelGrid>
							<p:commandButton value="Recuperar Contraseña" action="#{loginBean.recuperarContrasena}" rendered="#{loginBean.personaEncontrada}" update=":dialogBuscarPersona"/>
						</center>
					</h:form>
					<p:panelGrid columns="1" id="panelRecuperarContrasena2" rendered="#{!loginBean.personaEncontrada}">
						<center>
							<p:outputLabel value="No existe persona con ese tipo de identificación" />
						</center>
					</p:panelGrid>
				</p:dialog>
		</center>
	</f:view>
</ui:composition>

</html>
